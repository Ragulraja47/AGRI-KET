<!DOCTYPE html>
<html>

<head>
  <!-- Basic -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <!-- Mobile Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <!-- Site Metas -->
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon">

  <title>Agri-Ket</title>

  <!-- bootstrap core css -->
  <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />

  <!-- fonts style -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Poppins:400,600,700&display=swap" rel="stylesheet" />

  <!-- Custom styles for this template -->
  <link href="css/style.css" rel="stylesheet" />
  <!-- responsive style -->
  <link href="css/responsive.css" rel="stylesheet" />
</head>

<body>
  <div class="hero_area">
    <!-- header section strats -->
    <div class="hero_bg_box">
      <div class="img-box">
        <img src="wall1.png" alt="">
      </div>
    </div>

    <header class="header_section">
      <div class="header_top">
        <div class="container-fluid">
          <div class="contact_link-container">
            
            </a>
            <a href="" class="contact_link2">
              
            <a href="" class="contact_link3">
             
            </a>
          </div>
        </div>
      </div>
      <div class="header_bottom">
        <div class="container-fluid">
          <nav class="navbar navbar-expand-lg custom_nav-container">
            <a class="navbar-brand" href="index.html">
              <span>
                AGRI-KET
              </span>
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class=""></span>
            </button>

            <div class="collapse navbar-collapse ml-auto" id="navbarSupportedContent">
              <ul class="navbar-nav  ">
                
                <li  class="nav-item">
                  <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span> </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="disease.html"> Disease</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="doctor.html">Doctors</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="selllogo.html"> Buying</a>
                </li>
                <li class="nav-item ">
                  <a class="nav-link" href="selling.html"> Selling </a>
                </li>
                <li class="nav-item active">
                  <a class="nav-link" href="auction.html"> Auction </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="contact.html">Contact us</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="login.html">Logout</a>
                </li>
               
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </header>
    <html>
  <head>
    <style>
     body {
      color: #ccc;
      font-family: Arial, sans-serif;
      background-color: transparent;
      margin: 0;
      padding: 0;
    }

    #container {
      width: 80%;
      margin: 0 auto;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    #product {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 20px;
    }

    #product img {
      max-width: 30%; /* Reduced image size */
      height: auto;
      border-radius: 8px;
    }

    #product video {
      max-width: 40%;
      height: auto;
      border-radius: 8px;
      margin-left: 20px;
    }

    #biddingContainer {
      width: 70%;
      max-height: 200px; /* Set a maximum height for 6 rows */
      overflow-y: auto; /* Enable vertical scrolling */
      margin-bottom: 20px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      
      padding: 8px;
      text-align: left;
      border-bottom: 1px solid transparent;
    }

    th {
      color: #4CAF50;
      background-color: transparent;
      font-weight: bold;
    }

    form {
      width: 75%;
      background-color: transparent;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    input[type="text"],
    input[type="number"] {
      width: calc(100% - 22px);
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 4px;
      border: 1px solid transparent;
    }

    button {
      background-color: #4CAF50;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    button:hover {
      background-color: #45a049;
    }

    #resMsg {
      margin-top: 10px;
      color: #4CAF50;
      font-weight: bold;
    }  

    </style>
     </head>
     <body>
      <div id="container">
        <center>
          <div id="product">
            <img src="malwari.jpg" alt="">
            <video controls>
              <source src="marwari.mp4" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          </div>
          <div id="biddingContainer">
            <table id="table">
              <tr>
                <th>Standing</th>
                <th>Name</th>
                <th>Amount</th>
              </tr>
            </table>
          </div>
          <div id="resMsg"></div>
          <form id="biddingForm">
            <input type="text" name="Name" placeholder="Name" /><br>
            <input type="number" name="amount" placeholder="Enter Amount"/><br>
            <input type="number" name="number" placeholder="Mobile number"/><br>
            <button>Make a bid</button>
          </form>
        </div>
  </body>
  <script>
    let resData = [];
    fetch("getBiddings.php")
      .then((res) => {
        return res.json();
      })
      .then((data) => {
        resData = data;
        console.log(resData)
        resData.sort((a, b) => {
          return b["amount"] - a["amount"];
        });
        resData.map((value,index) => {

          let table = document.getElementById("table");
          let tableRow = document.createElement("tr");
          let tableData1 = document.createElement("td");
          tableData1.innerText = index + 1;
          let tableData2 = document.createElement("td");
          tableData2.innerText = value["Name"];
          let tableData3 = document.createElement("td");
          tableData3.innerText = value["amount"];
          tableRow.appendChild(tableData1);
          tableRow.appendChild(tableData2);
          tableRow.appendChild(tableData3);
          table.appendChild(tableRow);
        });
      });

    let form = document.getElementById("biddingForm");
  
    form.addEventListener("submit", (e)=>{
        e.preventDefault();
        let formData = new FormData(e.target)
        fetch("addBiddings.php", {
          method: "POST",
          body: formData
        }).then((res)=>{
          return res.json();
        }).then((data)=>{
          document.getElementById("resMsg").innerText = data.msg;
        });
        resData.push({
          id: resData.length ,
          Name: formData.get("Name"), 
          amount: formData.get("number"),
          amount: formData.get("amount")
        });
        renderBiddingsTable(resData);
    });



    function renderBiddingsTable(data) {
    let table = document.getElementById("table");
    table.innerHTML = ""; // Clear existing table content
      data.sort((a, b) => {
        return b.amount - a.amount;
      });
    data.forEach((value, index) => {
        let tableRow = document.createElement("tr");
        let tableData1 = document.createElement("td");
        tableData1.innerText = index + 1; // Displaying index starting from 1
        let tableData2 = document.createElement("td");
        tableData2.innerText = value.Name;
        let tableData3 = document.createElement("td");
        tableData3.innerText = value.amount;
        tableRow.appendChild(tableData1);
        tableRow.appendChild(tableData2);
        tableRow.appendChild(tableData3);
        table.appendChild(tableRow);
    });
}
   
  </script>
</html></center>
